---
name: knowledge-research
description: "Use when the user shares a link, topic, tool name, or material that might be added to the knowledge base. Also trigger when: (1) user mentions a tool, library, or topic to record, (2) user says 'добавь в knowledge', 'запиши', 'посмотри что это', (3) Claude itself discovers something valuable during other work. Ensures proper investigation before recording — prevents shallow notes without research."
---

# Knowledge Research — исследуй перед записью

## The Iron Law

**Не записывай без ориентировки.** Никогда не создавай и не обновляй файл в knowledge/ без прохождения Фазы 1. Сначала пойми тему, проверь что уже есть, согласуй направление с Виктором — потом фиксируй.

## YAML — обязательно при изменении файла

**Когда закончил все правки в файле knowledge/ — обнови YAML-заголовок:**
- `updated:` → сегодняшняя дата
- `version:` → N+1
- Касается любого изменения: содержимое, ссылки, cross-references. Одна правка или десять — version растёт на 1 за сессию.

## Core Process

**Содержание важнее структуры.** Сначала пойми что ценного в материале. Категоризация и формат — второй шаг. Если сомневаешься в категории — предложи варианты и спроси Виктора, не трать раунды на перекладывание между папками.

### Фаза 1: Сориентируйся (без веба)

**Цель:** понять тему и куда она ложится в knowledge/ — ДО любого веб-исследования.

**Шаг 1 — Прочитай материал от Виктора.** Если это ссылка — fetch только её (не глубже). Если тема/упоминание — работай с тем что есть.

**Шаг 2 — Проверь knowledge/.** Перед любым веб-поиском:
1. Определи **ТЕМУ** (область знания), не инструмент. "Дизайн в Cowork" → тема "UI-дизайн".
2. Прочитай **ВСЕ README.md** в подпапках knowledge/ (~80 строк суммарно) — определи ВСЕ затронутые категории. Секция "Границы" в каждом README подскажет куда относится материал. Не ограничивайся одной "очевидной" папкой.
3. Для каждой затронутой категории прочитай **`!сводный файл`** — покажет знания и связи, которые Grep не найдёт.
4. Grep по ключевым словам темы и инструмента.

**Шаг 3 — Определи суть и фокус.** Прежде чем лезть в веб — пойми, что в материале ценного. Workflow? Конкретный инструмент? Новый паттерн? Определи главную ценность и исследуй её. Всё остальное — контекст, который записывается как есть из источника, без отдельного исследования.

**Шаг 4 — Доложи Виктору ориентировку:**
1. **Тема** — о чём это, в 1-2 предложения
2. **Куда ложится** — какие категории и файлы затронуты
3. **Что уже есть** — пересечения с существующими файлами
4. **Предложение** — "обновить [файл]" / "новый файл [категория/имя.md]" / "не стоит записывать"
5. **Вопрос:** "Нужно ли глубже исследовать в вебе, или записываем на основе того что есть?"

**→ СТОП. Жди реакцию Виктора.** Он может сказать:
- "Исследуй глубже" → переходи к Фазе 2
- "Записывай как есть" → пропускай Фазы 2-3, переходи сразу к Запиши
- "Не надо записывать" → стоп
- Перенаправить в другую категорию

### Фаза 2: Исследуй (только после согласования)

**Только если Виктор попросил углубить.** Глубина зависит от типа:

| Тип материала | Что делать |
|--------------|-----------|
| Ссылка на статью/docs | WebFetch → прочитай полностью |
| GitHub-репо | Изучи README, структуру, ключевые файлы. Оцени масштаб и активность (но НЕ записывай точные stars — они устаревают за недели) |
| Краткое упоминание/тема | WebSearch → найди первоисточник и контекст |
| YouTube-видео | Скилл `youtube-transcript`: `uv run .claude/skills/youtube-transcript/scripts/get_transcript.py "URL"`. Получи транскрипт → изучи как текстовый источник |
| Видео/подкаст (не YouTube) | WebSearch → найди текстовые обзоры, транскрипты, ключевые тезисы |

**Сверь с тем что уже есть.** Если в knowledge/ нашлись файлы по теме — сравни с тем что нашёл в вебе. Три сценария:
- **Нет расхождений** — используй как базу, не дублируй
- **Устарело** — отметь что нужно обновить (конкретно что изменилось)
- **Противоречие** — разберись где правда, исправь при записи

**Обязательно при любом типе:**
- Пойми масштаб: это заметка на абзац или тема на отдельный файл?
- Определи что конкретно ценного (конкретика, которой у AI нет из обучения)
- **Фильтруй быстро устаревающее:** не записывай точные числа stars, количества скиллов/плагинов, позиции в рейтингах. Записывай то, что стабильно: что это, чем отличается, как использовать, кто автор

### Фаза 3: Доложи и обсуди

Расскажи Виктору что нашёл. Формат доклада:

1. **Суть** — что это, в 2-3 предложения
2. **Что ценного** — конкретика, которой у нас нет. Паттерны, инструменты, связи
3. **Связь с knowledge/** — пересекается ли с тем, что уже есть. Если да — что обновить
4. **Коллизии** — если нашёл расхождения с существующими файлами, перечисли: что устарело, где противоречие
5. **Рекомендация** — одна из:
   - "Новый файл [категория/имя.md] — потому что [причина]"
   - "Обновить существующий [файл] — потому что [причина]"
   - "Не стоит записывать — потому что [причина]"

**→ СТОП. Жди реакцию Виктора.** Он может:
- Согласиться с рекомендацией
- Уточнить формат или объём записи
- Перенаправить в другую категорию
- Решить что не стоит записывать

### Фаза 4: Запиши

Только после согласования:

**1. Создай/обнови файл:**
- Формат — строго по knowledge/README.md (YAML-заголовок, секция "Кратко")
- YAML: `updated`, `version`, `review_by` — см. правило "YAML — обязательно при изменении файла" выше
- Файл должен быть **self-contained** — понятен без контекста svaib (будущая публикация)

**2. Обнови файлы категории (оба!):**
- **README.md** — добавь новый файл в список "Файлы" с однострочным описанием
- **!название.md** — **интегрируй** новое знание в основной текст: проверь на противоречия с существующим, замени устаревшее, сохрани целостность. Не дописывай в конец — перерабатывай. `!файл` = выверенная сводка знаний по теме

**3. Проверь cross-references (обратные ссылки):**
- Grep по ключевым словам темы в соседних файлах knowledge/ — кто упоминает эту тему?
- Если файл X ссылается на тему нового файла Y — добавь в X обратную ссылку на Y
- Если в новом файле есть секция "Связанные файлы" — проверь что ссылки симметричны

**НЕ вызывай context-editor** — он для meta/, dev/, pub/. Для knowledge/ все проверки выше — это и есть полный чеклист

**Принципы записи:**
- **Один файл = одна тема.** Три статьи про RAG → один файл с секциями. Самостоятельная сущность (фреймворк, крупный репо) → отдельный файл
- **Не усложняй структуру раньше времени.** Нет данных — нет подпапок. Когда файлов 10+ в категории — тогда думаем о подструктуре
- **Не придумывай факты** — записывай что в источнике. Добавлять связи между файлами knowledge/ — ОК

## Red Flags

Ты нарушаешь этот скилл если:
- Создаёшь файл в knowledge/ не пройдя фазу исследования
- Записываешь только то, что Виктор сказал, без собственного исследования
- Не прочитал ВСЕ README категорий перед определением куда записывать — работал только с "очевидной" папкой
- Не проверил что уже есть в knowledge/ по этой теме
- Сказал "не стоит записывать" не прочитав `!сводный файл` категории по теме
- Полез в веб-исследование без согласования направления с Виктором
- Не показал Виктору доклад перед созданием файла
- Обновляешь сводный файл простым дописыванием вместо интеграции
- Обновил !файл, но не обновил README.md (или наоборот)
- Забыл обновить version, updated или review_by — даже при небольших изменениях

## Common Rationalizations

| Отговорка | Почему это неправильно |
|-----------|----------------------|
| "Виктор всё описал, мне не нужно исследовать" | Виктор кидает краткие заметки. Твоя работа — углубить, найти контекст, связи |
| "Это мелкая заметка, можно просто записать" | Даже мелкая заметка требует проверки knowledge/ на дубликаты и связи |
| "Я уже знаю эту тему из обучения" | Твои знания устарели на 6-12 месяцев. Исследуй текущее состояние |
| "Давай запишем сейчас, доисследуем потом" | Как минимум Фаза 1 (ориентировка) обязательна. Без неё не понятно куда класть и что уже есть |
| "Сводный файл обновлю позже" | Сводный файл — часть записи. Не "потом", а сейчас |
| "Stars показывают масштаб, надо записать" | Через месяц цифра устарела. Записывай качественную оценку ("крупный проект"), не количественную |

## Quick Reference

| Фаза | Что делаю | Результат |
|------|----------|-----------|
| 1. Сориентируйся | Прочитай материал → ВСЕ README → !файлы → grep → доложи ориентировку | Виктор решает: исследовать / записать как есть / не записывать |
| 2. Исследуй | fetch, search, explore (только если Виктор попросил) | Глубокое понимание |
| 3. Доложи и обсуди | Суть + ценное + связи + коллизии + рекомендация → жди реакцию | Согласованное решение |
| 4. Запиши | Файл (version+1, review_by+3мес) + README + !файл + cross-refs | Знание зафиксировано |
